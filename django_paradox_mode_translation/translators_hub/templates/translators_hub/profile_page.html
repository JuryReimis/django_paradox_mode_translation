{% extends 'translators_hub/base.html' %}

{% load static %}
{% load translators_hub_tags %}

{% block head %}
    <link type="text/css" href="{% static 'translators_hub/css/form_styles.css' %}" rel="stylesheet">
    <script type="text/javascript" src="{% static 'translators_hub/js/jQuery/jQuery.js' %}"></script>
    <script src="{% static 'translators_hub/js/commentaryFunctions.js' %}"></script>
{% endblock %}
{% block content %}
    <div class="container justify-content-center">
        {% if update_button %}
            <a class="btn btn-success" href="{% url 'translators_hub:update_profile' slug=slug %}">–ò–∑–º–µ–Ω–∏—Ç—å –ø—Ä–æ—Ñ–∏–ª—å</a>
        {% endif %}
        {% if profile_data %}
            <table class="table table-bordered table-light">
                <tr>
                    <th>{{ profile_data.user.username }}</th>
                    <td><img src="/media/{{ profile_data.profile_image }}" alt="profile avatar" height="40" width="40">
                    </td>
                </tr>
                <tr>
                    <th>–ù–∞–≥—Ä–∞–¥—ã:</th>
                    <td>{% if profile_data.titles.all %}{{ profile_data.titles.all }}{% else %}–ù–µ—Ç –Ω–∞–≥—Ä–∞–¥{% endif %}</td>
                </tr>
                <tr>
                    <th>–û–ø–∏—Å–∞–Ω–∏–µ:</th>
                    <td>{{ profile_data.description }}</td>
                </tr>
                <tr>
                    <th>–û–ø—ã—Ç:</th>
                    <td>{{ profile_data.experience }}</td>
                </tr>
                <tr>
                    <th>–†–µ–ø—É—Ç–∞—Ü–∏—è:</th>
                    <td>{{ profile_data.reputation }}</td>
                </tr>
            </table>
        {% endif %}
    </div>
{% endblock %}

{% block comments %}
    <div class="container border-3 justify-content-center">
        {% if comment_form %}
            <form method="post" class="p-3">
                {% csrf_token %}
                <table class="table table-borderless">
                    {{ comment_form }}
                </table>
                <div class="container text text-end">
                    <button class="btn btn-success" type="submit">–û—Ç–ø—Ä–∞–≤–∏—Ç—å</button>
                </div>
            </form>
        {% endif %}
        {% get_comments profile_data as page_obj %}
        {% if page_obj %}
            <ul class="list-group">
                {% for comment in page_obj.object_list %}
                    <li class="list-group-item">
                        <div class="row">
                            <div class="comment-container col"
                                 style="background-color: #eee; padding: 10px; margin-bottom: 10px; position: relative;">
                                <div class="author-date-container"
                                     style="display: flex; justify-content: space-between; align-items: center;">
                                    <a style="margin: 0;" href="{{ comment.author.get_absolute_url }}"><strong>{{ comment.author }}</strong></a>
                                    <p style="margin: 0; color: #888;">{{ comment.pub_date }}</p>
                                </div>

                                <p style="margin: 10px 0; padding-right: 60px;">{{ comment.comment_text }}</p>

                                <div class="comment-buttons"
                                     style="position: absolute; bottom: 5px; right: 5px; display: flex; gap: 5px;">
                                    <div>
                                        <span>{{ comment.likes }}</span>
                                    </div>
                                    <button type="button" class="btn btn-success btn-sm rounded-circle"
                                            onclick="likeComment({{ comment.pk }})">üëç
                                    </button>
                                    <button type="button" class="btn btn-danger btn-sm rounded-circle"
                                            onclick="dislikeComment({{ comment.pk }})">üëé
                                    </button>
                                </div>
                            </div>
                            {% if delete_root %}
                                <div class="col col-sm-auto">
                                        <form method="post" name="delete">
                                            {% csrf_token %}
                                            <input class="button" type="hidden" name="comment_id"
                                                   value="{{ comment.pk }}">
                                            <button type="submit" class="btn btn-danger btn-sm rounded-circle">
                                                üóëÔ∏è
                                            </button>
                                        </form>
                                </div>
                            {% endif %}
                        </div>
                    </li>
                {% endfor %}
            </ul>
            {% get_pagination_block page_obj %}
        {% endif %}
    </div>
{% endblock %}
